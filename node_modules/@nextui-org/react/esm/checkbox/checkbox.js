import e,{useCallback as a,useEffect as i,useMemo as t,useState as c,useRef as n,useImperativeHandle as o}from"react";import{useFocusRing as s}from"@react-aria/focus";import{useCheckbox as l}from"./checkbox-context";import d from"../use-warning";import{StyledCheckboxLabel as r,StyledCheckboxContainer as m,StyledCheckboxInput as u,StyledCheckboxMask as h,StyledIconCheck as x,StyledIconCheckFirstLine as k,StyledIconCheckSecondLine as b,StyledCheckboxText as p}from"./checkbox.styles";import f from"../utils/clsx";import{__DEV__ as v}from"../utils/assertion";import{jsx as N}from"react/jsx-runtime";import{jsxs as C}from"react/jsx-runtime";const g=e.forwardRef((({checked:e,initialChecked:g,line:j,rounded:z,indeterminate:D,disabled:P,onChange:w,size:y,className:I,children:F,label:R,color:S,labelColor:V,animated:A,value:E,preventDefault:G,...U},$)=>{const[q,B]=c(g),[H,J]=c(D),K=n(null);o($,(()=>null==K?void 0:K.current));const{color:L,labelColor:M,size:O,updateState:Q,inGroup:T,disabledAll:W,values:X}=l(),{isFocusVisible:Y,focusProps:Z}=s(),_=T&&W||P,ee="default"!==S?S:L,ae="md"!==y?y:O,ie="default"!==V?V:M;v&&T&&e&&d('Remove props "checked" when [Checkbox] component is in the group.',"Checkbox"),T&&i((()=>{const e=X.includes(E);e!==q&&B(e)}),[X.join(",")]),i((()=>{J(D)}),[D]);const te=a((e=>{if(_)return;const a={target:{checked:!q},stopPropagation:e.stopPropagation,preventDefault:e.preventDefault,nativeEvent:e};T&&Q&&Q&&Q(E,!q),H?(J(!1),B(!0)):B(!q),w&&w(a)}),[Q,w,_,q,H]);i((()=>{void 0!==e&&B(e)}),[e]);const ce=t((()=>q&&H?"mixed":q?"checked":"uncheked"),[q,H]);return C(r,{size:ae,disabled:_,animated:A,className:f("nextui-checkbox-label",`nextui-checkbox--${ce}`,I),css:U.css,children:[C(m,{className:"nextui-checkbox-container",tabIndex:_?-1:0,color:ee,rounded:z,disabled:_,animated:A,isFocusVisible:Y,...Z,children:[N(u,{ref:K,type:"checkbox",className:"nextui-checkbox-input",tabIndex:-1,"data-state":ce,disabled:_,checked:q,"aria-checked":q&&H?"mixed":q,"aria-disabled":_,onChange:te,...U}),N(h,{checked:q,animated:A,className:"nextui-checkbox-mask",children:C(x,{size:ae,indeterminate:H,checked:q,animated:A,className:"nextui-icon-check",children:[N(k,{indeterminate:H,checked:q,animated:A,className:"nextui-icon-check-line1"}),N(b,{indeterminate:H,checked:q,animated:A,className:"nextui-icon-check-line2"})]})})]}),(F||R)&&N(p,{className:"nextui-checkbox-text",color:ie,line:j,checked:q,disabled:_,animated:A,children:F||R})]})}));g.defaultProps={value:"",size:"md",color:"default",labelColor:"default",disabled:!1,preventDefault:!0,initialChecked:!1,indeterminate:!1,rounded:!1,line:!1,animated:!0,className:""},g.toString=()=>".nextui-checkbox",v&&(g.displayName="NextUI - Checkbox");export default g;